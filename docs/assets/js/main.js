"use strict";let data={palette:1,name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""};const defaultName="Leela Turanga",defaultPosition="Piloto en Planet Express",inputName=document.querySelector(".js-input-name"),inputJob=document.querySelector(".js-input-job"),inputEmail=document.querySelector(".js-input-email"),inputLinkedin=document.querySelector(".js-input-linkedin"),inputGithub=document.querySelector(".js-input-github"),inputPhone=document.querySelector(".js-input-phone"),inputPalette1=document.querySelector(".js_palette1"),inputPalette2=document.querySelector(".js_palette2"),inputPalette3=document.querySelector(".js_palette3"),inputPalette4=document.querySelector(".js_palette4"),inputPalette5=document.querySelector(".js_palette5");function readForm(){data.name=document.querySelector(".js-input-name").value,data.job=document.querySelector(".js-input-job").value,data.email=document.querySelector(".js-input-email").value,data.linkedin=document.querySelector(".js-input-linkedin").value,data.github=document.querySelector(".js-input-github").value,data.phone=document.querySelector(".js-input-phone").value,data.palette=parseInt(document.querySelector("input[name=paletteoptions]:checked").id),updateAll()}function updateCardItem(e,t){const a=data[e];let n;n=a||t,document.querySelector(".js-"+e).innerHTML=n}function updateCardLink(e,t){const a=data[e];let n;n=a?t+a:"",document.querySelector(".js-"+e).href=n,hideIcon(e,a)}function updateCardLinkOnStart(e,t){t&&(document.querySelector(".js-"+e).href=t,hideIcon(e,t))}function removeClassesFromElement(e,t){e.classList.remove("js_palette1"+t),e.classList.remove("js_palette2"+t),e.classList.remove("js_palette3"+t),e.classList.remove("js_palette4"+t),e.classList.remove("js_palette5"+t)}function removeClassesFromElements(e,t){for(let a=0;a<e.length;a++)removeClassesFromElement(e[a],t)}function addClassToElements(e,t){for(let a=0;a<e.length;a++)e[a].classList.add(t)}function updateCardPalette(e){const t=document.querySelector(".js-name"),a=document.querySelector(".js-border-box"),n=document.querySelectorAll(".js-icon"),o=document.querySelectorAll(".js-icon-container");removeClassesFromElement(t,"_color"),removeClassesFromElement(a,"_border_box"),removeClassesFromElements(n,"_color"),removeClassesFromElements(o,"_border_color");const r="js_palette"+(e||data.palette);t.classList.add(r+"_color"),a.classList.add(r+"_border_box"),addClassToElements(n,r+"_color"),addClassToElements(o,r+"_border_color")}function hideIcon(e,t){const a=document.querySelector(".jscontainer-"+e);""!==t?a.classList.remove("hidden-icon"):a.classList.add("hidden-icon")}inputName.addEventListener("keyup",readForm),inputJob.addEventListener("keyup",readForm),inputEmail.addEventListener("keyup",readForm),inputLinkedin.addEventListener("keyup",readForm),inputGithub.addEventListener("keyup",readForm),inputPhone.addEventListener("keyup",readForm),inputPalette1.addEventListener("change",readForm),inputPalette2.addEventListener("change",readForm),inputPalette3.addEventListener("change",readForm),inputPalette4.addEventListener("change",readForm),inputPalette5.addEventListener("change",readForm);const cardPreviewName=document.querySelector(".js-name"),cardPreviewBorderBox=document.querySelector(".js-border-box"),cardPreviewIcons=document.querySelectorAll(".js-icon"),cardPreviewIconsContainer=document.querySelectorAll(".js-icon-container"),clearButton=document.querySelector(".js-clear-button");function handleClearButtonClick(){document.querySelector(".js-form").reset(),data.palette=1,data.name="",data.job="",data.phone="",data.email="",data.linkedin="",data.github="",data.photo="",updateAll(),resetImage()}clearButton.addEventListener("click",handleClearButtonClick);const collContents=document.querySelectorAll(".js-collapsable"),collButtons=document.querySelectorAll(".js-coll");function createCollapsibleButtonListeners(){for(let e=0;e<collButtons.length;e++)collButtons[e].addEventListener("click",(function(){collContents[e].classList.toggle("content")}))}createCollapsibleButtonListeners();const fr=new FileReader,uploadBtn=document.querySelector(".js__profile-trigger"),fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");let imgcurrent="";function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){(""!==data.photo||fr.result)&&(profileImage.style.backgroundImage=`url(${data.photo||fr.result})`,profilePreview.style.backgroundImage=`url(${data.photo||fr.result})`,fr.result&&(data.photo=fr.result),saveInfo())}function resetImage(){profileImage.style.backgroundImage="url('assets/images/profile-image.jpg')",profilePreview.style.backgroundImage="url('assets/images/profile-image.jpg')"}function fakeFileClick(){fileField.click()}uploadBtn.addEventListener("click",fakeFileClick),fileField.addEventListener("change",getImage);const createCardButton=document.querySelector(".js-createcard__button"),shareContainer=document.querySelector(".js-share__section"),url="https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/",testObject={palette:1,name:"MarÃ­a",job:"Front-end developer",phone:"+34 666666666",email:"mariagar@example.com",linkedin:"mariagar",github:"mariagar",photo:"data:image/png;base64,2342ba..."};function updateButtonStatus(){""===data.name?(createCardButton.classList.add("createcard__button--inactive"),createCardButton.disabled=!0):(createCardButton.classList.remove("createcard__button--inactive"),createCardButton.disabled=!1)}function createCard(){event.preventDefault(),fetch(url,{method:"POST",body:JSON.stringify(data),headers:{"Content-type":"application/json"}}).then(e=>e.json()).then(n=>function(n){if(n.success){const o="Â¡Hola! Leela me ha ayudado a crear esta tarjeta de presentaciÃ³n. Â¡Sube a nuestra nave y Ã©chale un vistazo! ðŸš€ ðŸš€";a.innerHTML=`<a href="${n.cardURL}" target="_blank">${n.cardURL}</a>`,t.classList.remove("content"),e.setAttribute("href",`https://twitter.com/intent/tweet?text=${o}&url=${n.cardURL}`)}}(n)).catch(e=>console.error("Error:",e));const e=document.querySelector(".js-share__button"),t=document.querySelector(".notification"),a=document.querySelector(".js-apiLink")}function saveInfo(){localStorage.setItem("data",JSON.stringify(data))}function getInfo(){return JSON.parse(localStorage.getItem("data"))}function updateAll(e){e?(inputName.value=e.name,inputJob.value=e.job,inputEmail.value=e.email,inputLinkedin.value=e.linkedin,inputGithub.value=e.github,inputPhone.value=e.phone,1===e.palette?inputPalette1.checked=!0:2===e.palette?inputPalette2.checked=!0:3===e.palette?inputPalette3.checked=!0:4===e.palette?inputPalette4.checked=!0:5===e.palette&&(inputPalette5.checked=!0),updateCardPalette(e.palette),updateCardItem("name",e.name||defaultName),updateCardItem("job",e.job||defaultPosition),updateCardLinkOnStart("email",e.email&&"mailto:"+e.email),updateCardLinkOnStart("linkedin",e.linkedin&&"https://linkedin.com/in/"+e.linkedin),updateCardLinkOnStart("github",e.github&&"https://github.com/"+e.github),updateCardLinkOnStart("phone",e.phone&&"tel:+34"+e.phone),writeImage()):(updateCardItem("name",defaultName),updateCardItem("job",defaultPosition),updateCardLink("email","mailto:"),updateCardLink("linkedin","https://linkedin.com/in/"),updateCardLink("github","https://github.com/"),updateCardLink("phone","tel:+34"),updateCardPalette(),updateButtonStatus(),saveInfo())}createCardButton.addEventListener("click",createCard);const backdata=getInfo();data=backdata||data,updateAll(backdata);